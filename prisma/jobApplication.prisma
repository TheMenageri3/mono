enum JobApplicationStatus {
    DRAFT
    SUBMITTED
    UNDER_REVIEW
    INTERVIEWING
    OFFERED
    ACCEPTED
    DECLINED
    REJECTED
}

model JobApplication {
    id                     String               @id @default(uuid())
    jobPostingId           String
    jobPosting             JobPosting          @relation(fields: [jobPostingId], references: [id])
    coverLetter            String?
    resumeId               String
    resume                 Media?               @relation("Resume", fields: [resumeId], references: [id])
    additionalMaterialsIds String[] // Array of Media IDs
    status                 JobApplicationStatus @default(DRAFT)
    referralUserId         String?
    referralUser           User?                @relation("Referral", fields: [referralUserId], references: [id])
    referralSource         String?
    submissionDate         DateTime?
    withdrawnDate          DateTime?
    withdrawnReason        String?
    internalNotes          String?
    applicantId            String
    applicant              User                 @relation("JobApplicantUser", fields: [applicantId], references: [id])

    createdAt DateTime  @default(now())
    updatedAt DateTime  @updatedAt
    deletedAt DateTime?

    createdById String
    createdBy   User   @relation("JobApplicationCreatedBy", fields: [createdById], references: [id])

    updatedById String
    updatedBy   User   @relation("JobApplicationUpdatedBy", fields: [updatedById], references: [id])

    interviews Interview[]
    jobApplicationQuestions JobApplicationQuestion[]

    placements Placement[]
}
