enum MediaType {
  VIDEO
  IMAGE
  PDF
  AUDIO
  DOCUMENT
  OTHER
}


//do check the storage types here and add/remove as needed
enum StorageType {
  LOCAL
  YOUTUBE
  S3
  CLOUDINARY
  EXTERNAL
}

model Media {
  id                String       @id @default(uuid())
  title             String
  type              MediaType
  storageType       StorageType
  url               String
  originalFilename  String?
  sizeInBytes       Int?
  mimeType          String?
  metadata          Json?        // Type-specific attributes stored as JSON
  
  // Nullable foreign keys for various relations
  userId            String?
  user              User?        @relation(fields: [userId], references: [id])
  profileId         String?
  profile           Profile?     @relation(fields: [profileId], references: [id])
  companyId         String?
  company           Company?     @relation(fields: [companyId], references: [id])
  productId         String?
  product           Product?     @relation(fields: [productId], references: [id])
  messageId         String?
  message           Message?     @relation(fields: [messageId], references: [id])
  documentId        String?
  document          Document?    @relation(fields: [documentId], references: [id])
  
  // Relation for when this media is used as a company logo
  companyLogo       Company?     @relation("CompanyLogo")
  
  // Tracking fields
  createdAt         DateTime     @default(now())
  updatedAt         DateTime     @updatedAt
  deletedAt         DateTime?
  createdById       String
  createdBy         User         @relation("MediaCreatedBy", fields: [createdById], references: [id])
  updatedById       String
  updatedBy         User         @relation("MediaUpdatedBy", fields: [updatedById], references: [id])
}
