enum MediaType {
  video
  image
  pdf
  audio
  document
  other
}


//do check the types here and change accordingly if needed
enum StorageType {
  local
  youtube
  s3
  cloudinary
  external
}

model Media {
  id                Int          @id @default(autoincrement())
  title             String
  type              MediaType
  storageType       StorageType
  url               String
  originalFilename  String?
  sizeInBytes       Int?
  mimeType          String?
  metadata          Json?        // Type-specific attributes stored as JSON
  
  // Nullable foreign keys for various relations
  userId            Int?
  user              User?        @relation(fields: [userId], references: [id])
  profileId         Int?
  profile           Profile?     @relation(fields: [profileId], references: [id])
  companyId         Int?
  company           Company?     @relation(fields: [companyId], references: [id])
  productId         Int?
  product           Product?     @relation(fields: [productId], references: [id])
  messageId         Int?
  message           Message?     @relation(fields: [messageId], references: [id])
  documentId        Int?
  document          Document?    @relation(fields: [documentId], references: [id])
  
  // Relation for when this media is used as a company logo
  companyLogo       Company?     @relation("CompanyLogo")
  
  // Tracking fields
  createdAt         DateTime     @default(now())
  updatedAt         DateTime     @updatedAt
  createdById       String
  createdBy         User         @relation("MediaCreatedBy", fields: [createdById], references: [id])
  updatedById       String
  updatedBy         User         @relation("MediaUpdatedBy", fields: [updatedById], references: [id])
}
